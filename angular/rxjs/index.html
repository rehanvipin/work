<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta name="generator" content="Hugo 0.145.0">
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  Async &amp; network stuff
  #

Not everything happens right at once in a webapp. It shouldn&rsquo;t wait for certain events when it can execute other things. This is where asynchronous processing is useful. Promises were the preferred way to do it but now there are observables (from rxjs). Promises represent one event that happens in the future while observables represent zero or more events that could happen synchronously or in the future. This particular section is about RxJS and HTTP in Angular.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:url" content="https://work.rehanvipin.me/angular/rxjs/">
  <meta property="og:site_name" content="Field Manual">
  <meta property="og:title" content="RxJS">
  <meta property="og:description" content="Async &amp; network stuff # Not everything happens right at once in a webapp. It shouldnâ€™t wait for certain events when it can execute other things. This is where asynchronous processing is useful. Promises were the preferred way to do it but now there are observables (from rxjs). Promises represent one event that happens in the future while observables represent zero or more events that could happen synchronously or in the future. This particular section is about RxJS and HTTP in Angular.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="angular">
<title>RxJS | Field Manual</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.ece3f56fc3f716f87ccd4e6f3ea44ba1fa6757114261dadfbf861fde7d4e6203.css" integrity="sha256-7OP1b8P3Fvh8zU5vPqRLofpnVxFCYdrfv4Yf3n1OYgM=">
<script defer src="/en.search.min.a48e4261065d27e1e22e6fad4bf487e263e7c0f6b72de5574fafdc0f076f8a19.js" integrity="sha256-pI5CYQZdJ&#43;HiLm&#43;tS/SH4mPnwPa3LeVXT6/cDwdvihk="></script>

<script defer src="/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js" integrity="sha256-b2&#43;Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC&#43;NdcPIvZhzk="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/favicon.png" alt="Logo" /><span>Field Manual</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-d938590ca2412dffddd407c9492deb06" class="toggle" checked />
    <label for="section-d938590ca2412dffddd407c9492deb06" class="flex justify-between">
      <a href="https://work.rehanvipin.me/angular/" class="">Angular</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/components/" class="">Components</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/template/" class="">Template Syntax</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/services/" class="">Services</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/directives/" class="">Directives</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/routing/" class="">Routing</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/forms/" class="">Forms</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/pipes/" class="">Pipes</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/di/" class="">Dependency Injection</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/rxjs/" class=" active">RxJS</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/test/" class="">Testing</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/libraries/" class="">Libraries</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/signals/" class="">Reactivity with Signals</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-c38691ce03cec66ff0f7b7efaab53e79" class="toggle"  />
    <label for="section-c38691ce03cec66ff0f7b7efaab53e79" class="flex justify-between">
      <a href="https://work.rehanvipin.me/spring-boot/" class="">Spring Boot</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/spring-boot/framework/" class="">Spring Framework</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-ce5ff98c33c145e8b67581715b2547e5" class="toggle"  />
    <label for="section-ce5ff98c33c145e8b67581715b2547e5" class="flex justify-between">
      <a href="https://work.rehanvipin.me/java/" class="">Java</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/java/intro/" class="">Setup</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/java/modules/" class="">Mods &amp; Packs</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/java/jvm/" class="">JVM</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/java/build_tools/" class="">Build tools</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/java/web-server/" class="">Web Server</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-e0492fb7d644f53d646814ca03b395ed" class="toggle"  />
    <label for="section-e0492fb7d644f53d646814ca03b395ed" class="flex justify-between">
      <a href="https://work.rehanvipin.me/linux/" class="">Linux stuff</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-773d618b842553ceefdcb3472b44e38d" class="toggle"  />
    <label for="section-773d618b842553ceefdcb3472b44e38d" class="flex justify-between">
      <a  class="">Web Development</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/webdev/html/" class="">HTML</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/webdev/css/" class="">CSS</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/webdev/js/" class="">JS</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/webdev/js-execution/" class="">JavaScript Execution</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/webdev/web-app-arch/" class="">Web App Architecture</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/webdev/web-auth/" class="">Web Authentication</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/webdev/react-and-bootstrap/" class="">React &amp; Boostrap</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Fun Stuff</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/misc/d3/" class="">D3</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/misc/typescript/" class="">Typescript</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/misc/tips-tricks/" class="">Tips &amp; Tricks</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/misc/snowflake/" class="">Snowflake</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/tmp/" class="">/tmp</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/whatnext/" class="">/next</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/credits/" class="">/credits</a>
  

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>RxJS</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#async--network-stuff">Async &amp; network stuff</a>
      <ul>
        <li><a href="#http">HTTP</a></li>
        <li><a href="#rxjs-">RxJS ðŸ’§</a>
          <ul>
            <li><a href="#observables">Observables</a></li>
            <li><a href="#observer">Observer</a></li>
            <li><a href="#subscriptions">Subscriptions</a></li>
            <li><a href="#operators">Operators</a></li>
            <li><a href="#subjects">Subjects</a></li>
            <li><a href="#scheduler">Scheduler</a></li>
          </ul>
        </li>
        <li><a href="#rxjs-operators">RxJS operators</a>
          <ul>
            <li><a href="#higher-order-observable-transformers">Higher-order observable transformers</a></li>
            <li><a href="#multicast">Multicast</a></li>
          </ul>
        </li>
        <li><a href="#error-handling">Error handling</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="async--network-stuff">
  Async &amp; network stuff
  <a class="anchor" href="#async--network-stuff">#</a>
</h1>
<p>Not everything happens right at once in a webapp. It shouldn&rsquo;t wait for certain events when it can execute other things. This is where asynchronous processing is useful. Promises were the preferred way to do it but now there are observables (from rxjs). Promises represent <strong>one event that happens in the future</strong> while observables represent <strong>zero or more events that could happen synchronously or in the future</strong>. This particular section is about RxJS and HTTP in Angular.</p>
<p>The docs 
  <a href="https://angular.io/guide/comparing-observables">tells how observables could be used in place of promises</a>.</p>
<p>Good resources for RxJS:</p>
<ul>
<li>
  <a href="https://gist.github.com/staltz/868e7e9bc2a7b8c1f754">A gist that explains reactive programming</a></li>
<li>
  <a href="https://www.learnrxjs.io/learn-rxjs/concepts/rxjs-primer">A single page crash course giving an overview of RxJS</a></li>
<li>
  <a href="https://rxjs.dev/guide/overview">Overview of main concepts. Official docs</a></li>
<li>
  <a href="https://youtu.be/ewcoEYS85Co">Video showing off some RxJS stuff live</a></li>
<li>
  <a href="https://www.youtube.com/watch?v=65Us8NwmYf4">Video about RxJS stuff specific to Angular</a></li>
</ul>
<h2 id="http">
  HTTP
  <a class="anchor" href="#http">#</a>
</h2>
<p>To communicate via HTTP in JS first import <code>HttpClientModule</code> from &ldquo;@angular/common/http&rdquo; into the ngModule of your choice. Wherever required, a dependency of type <code>HttpClient</code> from &ldquo;@angular/common/http&rdquo; can be injected so that HTTP calls can be made with it.</p>
<p>Once you have an object of <code>HttpClient</code>, say <code>http</code>, you can perform calls such as: <code>http.get&lt;T&gt;(url)</code> where <code>T</code> is the type of the response you expect. The result is an <code>Observable&lt;T&gt;</code> which can be subscribed to.</p>
<p>To add query parameters just do <strong>string concatenation :)</strong>. E.g. <code>http.get&lt;T&gt;(url+&quot;?userid=&quot;+searchUserId)</code> ðŸŒ´</p>
<p>There&rsquo;s also the <code>delete</code> method and <code>post</code> method. The <code>post</code> method needs a few more args like so: <code>http.post&lt;T&gt;(url, body, options)</code>. Where <code>body</code> is an object containing the data you want to give and options is also an object which has properties like HTTP headers.</p>
<p>The observables that the HTTP methods return just pass one value and then complete.</p>
<h2 id="rxjs-">
  RxJS ðŸ’§
  <a class="anchor" href="#rxjs-">#</a>
</h2>
<p>Helps in managing events in a functional programming and asynchronous manner. Its main concepts are:</p>
<h3 id="observables">
  Observables
  <a class="anchor" href="#observables">#</a>
</h3>
<p>An observable is a stream of lazy push-based computations. They can deliver values (zero to infinite) synchronously or asynchronously. Create one like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Observable</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;rxjs&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">obsv</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Observable</span>(<span style="color:#a6e22e">subscriber</span> <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// a stream of nexts optionally followed by either an error or a complete
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// e.g. :
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">subscriber</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">anyValue1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">subscriber</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">anyValue2</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">subscriber</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">anyValue3</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">subscriber</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">anyValue4</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// only one of the following two should be there
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">subscriber</span>.<span style="color:#a6e22e">error</span>(<span style="color:#a6e22e">anyError</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">subscriber</span>.<span style="color:#a6e22e">complete</span>();
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>The observable can then be subscribed to like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">subc</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">obsv</span>.<span style="color:#a6e22e">subscribe</span>(<span style="color:#a6e22e">value</span> <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">value</span>);
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p>The observable can also be stopped like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#a6e22e">subc</span>.<span style="color:#a6e22e">unsubscribe</span>();
</span></span><span style="display:flex;"><span><span style="color:#75715e">// the behaviour of the function can be customized
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// by setting the return value of the subscription function
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">custom</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Observable</span>(<span style="color:#a6e22e">subscriber</span> <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// do some computation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">unsubscribe() {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// do clean up perhaps?
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>Observables can be used in HTML templates. As a convention append a &ldquo;$&rdquo; while naming an observable
so that it is distinguishable in the template.</p>
<blockquote class="book-hint info">
  There can be multiple subscribers. Each one will get the same stream of data.
An observable may <code>complete</code> before some async operations within it have run. All subscribers will receive same series of <code>next</code>, <code>error</code> and <code>complete</code> events as each other.
When one of them unsubscribes, it stops the flow of data to only that one.
</blockquote>

<h3 id="observer">
  Observer
  <a class="anchor" href="#observer">#</a>
</h3>
<p>A consumer of an observable. Its just an object like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">observer</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">next</span>: <span style="color:#66d9ef">value</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Got a value: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">value</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">error</span>: <span style="color:#66d9ef">err</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Finished with an error: &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">err</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">complete</span><span style="color:#f92672">:</span> () <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Finished peacefully&#39;</span>);
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">subc</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">obsv</span>.<span style="color:#a6e22e">subscribe</span>(<span style="color:#a6e22e">observer</span>);
</span></span></code></pre></div><p>Some or all properties can be ignored</p>
<h3 id="subscriptions">
  Subscriptions
  <a class="anchor" href="#subscriptions">#</a>
</h3>
<p>They are the objects returned on subscribing to an observable. They essentially have only 3 methods:</p>
<ul>
<li><code>unsubscribe()</code>: stop receiving data from the observable</li>
<li><code>add(otherSubscription)</code>: so that unsubscribing this subscription will unsubscribe the other one too</li>
<li><code>remove(otherSubscription)</code>: to undo the add method described above</li>
</ul>
<h3 id="operators">
  Operators
  <a class="anchor" href="#operators">#</a>
</h3>
<p>
  <a href="https://rxjs.dev/operator-decision-tree">Easy to use resource to figure out what kind of operator you need.</a></p>
<p>They transform the data produced by observables. They are functions. There are two kinds:
<div class="book-columns flex flex-wrap">
  
  <div class="flex-even markdown-inner">
    <h4 id="creation">
  Creation
  <a class="anchor" href="#creation">#</a>
</h4>
<p>They generate observables from some kind of data / instruction. These functions return observables. An example is <code>of</code> from &lsquo;rxjs&rsquo;. It takes in one or more arguments and then creates an observable that pushes these objects one after the other.</p>
  </div>
  
  <div class="flex-even markdown-inner">
    <h4 id="pipeable">
  Pipeable
  <a class="anchor" href="#pipeable">#</a>
</h4>
<p>They generate observables from other observables. <strong>These functions return functions that take in an observable and return an observable.</strong> An example is <code>map</code> from &lsquo;rxjs/operators&rsquo;. You use it like <code>let funk = map(x =&gt; x+x)</code> and then <code>outputObsv = funk(inputObsv)</code>.</p>
  </div>
  
</div>
</p>
<p>The official docs has 
  <a href="https://rxjs.dev/guide/operators#categories-of-operators">a useful list of commonly used observables, grouped by category</a>.</p>
<p>Many times multiple pipeable operators are used in sequence. It becomes messy, thus we have the <code>pipe</code> function which can be used like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">obsv</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">of</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">obsv1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">x</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">x</span>)(<span style="color:#a6e22e">obsv</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">obsv2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">filter</span>(<span style="color:#a6e22e">y</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">y</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">3</span>)(<span style="color:#a6e22e">obsv1</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">obsv2</span>.<span style="color:#a6e22e">subscribe</span>(<span style="color:#a6e22e">v</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">v</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// is equivalent to
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">subscrip</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">of</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>).<span style="color:#a6e22e">pipe</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">x</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">x</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">filter</span>(<span style="color:#a6e22e">y</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">y</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>).<span style="color:#a6e22e">subscribe</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">v</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">v</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h3 id="subjects">
  Subjects
  <a class="anchor" href="#subjects">#</a>
</h3>
<p>An observerable that can also be used as an observer. They can be used to make an observable multicast (They are unicast by default).
Using it as an observable:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Subject</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;rxjs&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">obsv</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Subject</span>&lt;<span style="color:#f92672">any</span>&gt;(); <span style="color:#75715e">// the default type is void
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">obsv</span>.<span style="color:#a6e22e">subscribe</span>(<span style="color:#75715e">/* an observer */</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">obsv</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">someVal1</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">obsv</span>.<span style="color:#a6e22e">next</span>(<span style="color:#a6e22e">someVal2</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">obsv</span>.<span style="color:#a6e22e">complete</span>();
</span></span></code></pre></div><p>It can also be used as an observer. Just pass the Subject object to an observer&rsquo;s subscribe method. This works since the Subject already has <code>next</code>, <code>error</code>, and <code>complete</code> methods.</p>
<blockquote class="book-hint info">
  The important difference between a subject and a normal observable is that a subject does not maintain separate execution contexts.
A normal observer creates an independent execution context for each observer it has.
Whenever an observer subscribes to a subject it can receive values from there on only. Not the old values.
There are specialized subscribers that can buffer some old values to give new observers.
</blockquote>

<p><strong>A cool trick is to make an observable multicast with a subject.</strong> Like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#66d9ef">of</span>, <span style="color:#a6e22e">Subject</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;rxjs&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">obsv</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">of</span>([<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>]);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">sub</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Subject</span>&lt;<span style="color:#f92672">number</span>&gt;();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">scp1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">sub</span>.<span style="color:#a6e22e">subscribe</span>(<span style="color:#a6e22e">e</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">e</span>));
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">scp2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">sub</span>.<span style="color:#a6e22e">subscribe</span>(<span style="color:#a6e22e">e</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">e</span>));
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">obsv</span>.<span style="color:#a6e22e">subscribe</span>(<span style="color:#a6e22e">sub</span>);
</span></span></code></pre></div><p>Some useful specialized subjects:</p>
<h4 id="behavioursubject">
  BehaviourSubject
  <a class="anchor" href="#behavioursubject">#</a>
</h4>
<p>Holds the current value that was pushed. When new observers subscribe, they immediately get that value. Afterwards they continue to get pushed values like other old observers.</p>
<h4 id="replaysubject">
  ReplaySubject
  <a class="anchor" href="#replaysubject">#</a>
</h4>
<p>A generalized form of <code>BehaviourSubject</code>. It can hold a buffer of n previously pushed values and pass them at once to new observers.
They are used like this: <code>const sub = new ReplaySubject&lt;number&gt;(bufferSize, expirationTimeForEachValue [optional])</code></p>
<h4 id="void-subject">
  Void Subject
  <a class="anchor" href="#void-subject">#</a>
</h4>
<p>This is the default type of subject created when no type is specified. The subscriber for this doesn&rsquo;t receive any values for its <code>next</code> function. It&rsquo;s useful when you just want to know that some event occured.</p>
<h3 id="scheduler">
  Scheduler
  <a class="anchor" href="#scheduler">#</a>
</h3>
<p>Controls when subscriptions start. Can modify this so that subscriptions start immediately, on the next event loop, next micro loop, or after some timeout. This is kinda complex so 
  <a href="https://rxjs.dev/guide/scheduler">here&rsquo;s a link to the docs</a>.</p>
<h2 id="rxjs-operators">
  RxJS operators
  <a class="anchor" href="#rxjs-operators">#</a>
</h2>
<p>Another section for this topic?? Yep, there&rsquo;s a lot of variety here and these are the popular ones:</p>
<p>Bunch of useful ones grouped by category: 
  <a href="https://www.learnrxjs.io/learn-rxjs/operators">https://www.learnrxjs.io/learn-rxjs/operators</a></p>
<h3 id="higher-order-observable-transformers">
  Higher-order observable transformers
  <a class="anchor" href="#higher-order-observable-transformers">#</a>
</h3>
<p>Convert higher order observables into regular ones i.e., <code>Observable&lt;Observable&lt;T&gt;&gt;</code> to <code>Observable&lt;T&gt;</code>.
Nested subscriptions are not recommended since it is harder to unsubscribe and easier to cause timing issues.
All the below transformers take an argument of a function returning an observable.
Thus, there are two observables here. An &ldquo;outer&rdquo; one and an &ldquo;inner&rdquo; one.
For all of them, the final returned observable will go to error state if either inner or outer go to error.</p>
<ul>
<li><code>concatMap</code>: For each emitted value of outer observable, get all emmitted values of inner observable till completion, and then proceed to next emitted value of outer and repeat the same.</li>
<li><code>mergeMap</code>: Goes through emissions of outer observable and starts the inner observable for each one, but all the inner observable emit in parallel and the values that appear finally depends on their times of emissions.</li>
<li><code>switchMap</code>: For each emitted value of outer observable, cancel any previous subscribtions of inner observable and start new subscription.</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getInnerObs</span>(<span style="color:#a6e22e">x</span>: <span style="color:#66d9ef">number</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Observable</span>&lt;<span style="color:#f92672">string</span>&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// does some operations
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">outerObs</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">interval</span>(<span style="color:#ae81ff">1000</span>).<span style="color:#a6e22e">pipe</span>(<span style="color:#a6e22e">take</span>(<span style="color:#ae81ff">5</span>));
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">outerObs</span>.<span style="color:#a6e22e">pipe</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">xMap</span>(<span style="color:#a6e22e">outerVal</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">getInnerObs</span>(<span style="color:#a6e22e">outerVal</span>))
</span></span><span style="display:flex;"><span>).<span style="color:#a6e22e">subscribe</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// observer logic
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>)
</span></span></code></pre></div><blockquote class="book-hint info">
  What about <code>flatMap</code> ? That&rsquo;s just a deprecated alias for <code>mergeMap</code>.
</blockquote>

<h3 id="multicast">
  Multicast
  <a class="anchor" href="#multicast">#</a>
</h3>
<p>Assume an observable <code>o1</code>. When it is subscribed in two places, the subscriber logic of the observable runs twice.
If it&rsquo;s an observable got from <code>http</code>, that would mean it would make the API call twice.
This may not be expected. Especially in situations where the subscription is implicit e.g., async pipe and / or the subscriber logic is expensive.</p>
<p>Generally, this is avoided by creating a subject which takes value from the observable and there are multiple subscriptions to that subject.</p>
<p>However, that is not required. It can also be done with a <code>shareReplay(n)</code> operator. Where <code>n</code> is number of emissions to give to new subscriptions.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#a6e22e">mainObs</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Observable</span>&lt;<span style="color:#f92672">number</span>&gt;((<span style="color:#a6e22e">subscriber</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">total</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span><span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span>&lt;<span style="color:#f92672">100</span><span style="color:#960050;background-color:#1e0010">;</span> <span style="color:#a6e22e">i</span><span style="color:#960050;background-color:#1e0010">++)</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">total</span> <span style="color:#960050;background-color:#1e0010">+=</span> <span style="color:#a6e22e">i</span><span style="color:#960050;background-color:#1e0010">;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">subscriber.next</span><span style="color:#960050;background-color:#1e0010">(</span><span style="color:#a6e22e">total</span><span style="color:#960050;background-color:#1e0010">);</span>
</span></span><span style="display:flex;"><span>}<span style="color:#960050;background-color:#1e0010">);</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">sideObs </span><span style="color:#f92672">=</span> <span style="color:#a6e22e">this.mainObs.pipe</span><span style="color:#960050;background-color:#1e0010">(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tap</span><span style="color:#960050;background-color:#1e0010">(</span><span style="color:#a6e22e">val </span><span style="color:#f92672">=</span>&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;before shareReplay&#39;</span>, <span style="color:#a6e22e">val</span>)),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">shareReplay</span>(<span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tap</span>(() <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;after shareReplay&#39;</span>))
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">user1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">sideObs</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">user2</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">sideObs</span>.<span style="color:#a6e22e">pipe</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">val</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">val</span><span style="color:#f92672">*-</span><span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>There is also the <code>share()</code> operator, but that will not give values to late subscriber. E.g., user2 will not get a value</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#a6e22e">mainObs</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Observable</span>&lt;<span style="color:#f92672">number</span>&gt;((<span style="color:#a6e22e">subscriber</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">total</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span><span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span>&lt;<span style="color:#f92672">100</span><span style="color:#960050;background-color:#1e0010">;</span> <span style="color:#a6e22e">i</span><span style="color:#960050;background-color:#1e0010">++)</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">total</span> <span style="color:#960050;background-color:#1e0010">+=</span> <span style="color:#a6e22e">i</span><span style="color:#960050;background-color:#1e0010">;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">subscriber.next</span><span style="color:#960050;background-color:#1e0010">(</span><span style="color:#a6e22e">total</span><span style="color:#960050;background-color:#1e0010">);</span>
</span></span><span style="display:flex;"><span>}<span style="color:#960050;background-color:#1e0010">);</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">sideObs </span><span style="color:#f92672">=</span> <span style="color:#a6e22e">this.mainObs.pipe</span><span style="color:#960050;background-color:#1e0010">(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tap</span><span style="color:#960050;background-color:#1e0010">(</span><span style="color:#a6e22e">val </span><span style="color:#f92672">=</span>&gt; <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;before shareReplay&#39;</span>, <span style="color:#a6e22e">val</span>)),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">share</span>(),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">tap</span>(() <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;after shareReplay&#39;</span>))
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">user1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">sideObs</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">user2</span><span style="color:#f92672">!:</span> <span style="color:#a6e22e">Observable</span>&lt;<span style="color:#f92672">number</span>&gt;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">constructor</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setTimeout</span>(() <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user2</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">sideObs</span>.<span style="color:#a6e22e">pipe</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">val</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">val</span><span style="color:#f92672">*-</span><span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>        );  
</span></span><span style="display:flex;"><span>    }, <span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="error-handling">
  Error handling
  <a class="anchor" href="#error-handling">#</a>
</h2>
<p>Whenever there is a an error thrown in the subscriber logic of the observable, or somewhere in the pipeline, rxjs catches automatically it to emit an error notification to the observers. E.g.,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SubComponent</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">notifs</span><span style="color:#f92672">:</span> {<span style="color:#a6e22e">t</span>:<span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">val</span>:<span style="color:#66d9ef">any</span>}[] <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">obs</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Observable</span>&lt;<span style="color:#f92672">number</span>&gt;(<span style="color:#a6e22e">subscriber</span> <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">subscriber</span>.<span style="color:#a6e22e">next</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;custom err&#39;</span>); <span style="color:#75715e">// if we comment this out, the error would be thrown later on in the pipeline
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">subscriber</span>.<span style="color:#a6e22e">next</span>(<span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">subscriber</span>.<span style="color:#a6e22e">next</span>(<span style="color:#ae81ff">3</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">subscriber</span>.<span style="color:#a6e22e">next</span>(<span style="color:#ae81ff">4</span>);
</span></span><span style="display:flex;"><span>    }).<span style="color:#a6e22e">pipe</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">val</span> <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">val</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;val gte 3&#39;</span>)
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>    ).<span style="color:#a6e22e">subscribe</span>({
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">next</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">val</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">notifs</span>.<span style="color:#a6e22e">push</span>({<span style="color:#a6e22e">t</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;next&#39;</span>, <span style="color:#a6e22e">val</span>}),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">error</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">val</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">notifs</span>.<span style="color:#a6e22e">push</span>({<span style="color:#a6e22e">t</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;error&#39;</span>, <span style="color:#a6e22e">val</span>}),
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">complete</span><span style="color:#f92672">:</span> () <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">notifs</span>.<span style="color:#a6e22e">push</span>({<span style="color:#a6e22e">t</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;complete&#39;</span>, <span style="color:#a6e22e">val</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;dunzo&#39;</span>})
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>An error state is a terminal state for an observable. There won&rsquo;t be any emissions after that.</p>
<p>It is possible to catch errors and return some value instead. This is through the <code>catchError</code> operator.
The argument to the operator is a function which returns a replacement observable.</p>
<p>catchError will only catch errors which happen above it in the pipeline or in the subscriber logic.
In the example above, a catchError could be added after the map like so:</p>
<pre tabindex="0"><code>catchError((err) =&gt; {
    console.log(&#39;got an error&#39;, err);
    return new Observable(sub =&gt; { /* any logic*/ });
})
</code></pre><p>There are some frequently used observables for this case:</p>
<ul>
<li><code>EMPTY</code>. completes immediately without emitting any value</li>
<li><code>throwError(fnWhichReturnsAnError)</code>. emits an error notification immediately. The error object is as per the function passed to this operator.</li>
</ul>
<p>What if the observer doesn&rsquo;t specify a function for the error notification?
If it just has a <code>next</code> handler, then the error is thrown up the call stack, and in the case of a browser, will end up in a <code>console.error</code>.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



</div>

 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#async--network-stuff">Async &amp; network stuff</a>
      <ul>
        <li><a href="#http">HTTP</a></li>
        <li><a href="#rxjs-">RxJS ðŸ’§</a>
          <ul>
            <li><a href="#observables">Observables</a></li>
            <li><a href="#observer">Observer</a></li>
            <li><a href="#subscriptions">Subscriptions</a></li>
            <li><a href="#operators">Operators</a></li>
            <li><a href="#subjects">Subjects</a></li>
            <li><a href="#scheduler">Scheduler</a></li>
          </ul>
        </li>
        <li><a href="#rxjs-operators">RxJS operators</a>
          <ul>
            <li><a href="#higher-order-observable-transformers">Higher-order observable transformers</a></li>
            <li><a href="#multicast">Multicast</a></li>
          </ul>
        </li>
        <li><a href="#error-handling">Error handling</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>

</html>












