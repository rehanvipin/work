<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta name="generator" content="Hugo 0.131.0">
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Building Java code # Why not just use javac ? Well, you can but tools save time because there could be:
Many Java files that need to be compiled for the main file. Incremental builds, building only the classes whose code has changed. External dependencies that need to be fetched. (Transitive dependencies! Versions!) Package code into a .jar or .jmod file. Custom arguments for compiling certain classes ? Custom arguments for running the tests.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:url" content="https://work.rehanvipin.me/java/build_tools/">
  <meta property="og:site_name" content="Field Manual">
  <meta property="og:title" content="Build tools">
  <meta property="og:description" content="Building Java code # Why not just use javac ? Well, you can but tools save time because there could be:
Many Java files that need to be compiled for the main file. Incremental builds, building only the classes whose code has changed. External dependencies that need to be fetched. (Transitive dependencies! Versions!) Package code into a .jar or .jmod file. Custom arguments for compiling certain classes ? Custom arguments for running the tests.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="java">
<title>Build tools | Field Manual</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.ece3f56fc3f716f87ccd4e6f3ea44ba1fa6757114261dadfbf861fde7d4e6203.css" integrity="sha256-7OP1b8P3Fvh8zU5vPqRLofpnVxFCYdrfv4Yf3n1OYgM=">
<script defer src="/en.search.min.df23676f556a7be7a1e479ea7c470b9c124d2065116949e78c3f37934b7afd70.js" integrity="sha256-3yNnb1Vqe&#43;eh5HnqfEcLnBJNIGURaUnnjD83k0t6/XA="></script>

<script defer src="/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js" integrity="sha256-b2&#43;Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC&#43;NdcPIvZhzk="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/favicon.png" alt="Logo" /><span>Field Manual</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-db70775a2f464f55832baa63954506fc" class="toggle"  />
    <label for="section-db70775a2f464f55832baa63954506fc" class="flex justify-between">
      <a href="https://work.rehanvipin.me/angular/" class="">Angular</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/overview/" class="">Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/components/" class="">Components</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/template/" class="">Template Syntax</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/services/" class="">Services</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/directives/" class="">Directives</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/routing/" class="">Routing</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/forms/" class="">Forms</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/pipes/" class="">Pipes</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/di/" class="">Dependency Injection</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/rxjs/" class="">RxJS</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/test/" class="">Testing</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/libraries/" class="">Libraries</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/angular/signals/" class="">Reactivity with Signals</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-044fa29ae89cdc7fefbeda99f0fc5d1f" class="toggle"  />
    <label for="section-044fa29ae89cdc7fefbeda99f0fc5d1f" class="flex justify-between">
      <a href="https://work.rehanvipin.me/spring-boot/" class="">Spring Boot</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/spring-boot/framework/" class="">Spring Framework</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/spring-boot/gradle/" class="">Gradle</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-a533dae2ec66f5b51d3c38ec9d934c01" class="toggle" checked />
    <label for="section-a533dae2ec66f5b51d3c38ec9d934c01" class="flex justify-between">
      <a href="https://work.rehanvipin.me/java/" class="">Java</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/java/intro/" class="">Setup</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/java/modules/" class="">Mods &amp; Packs</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/java/jvm/" class="">JVM</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/java/build_tools/" class=" active">Build tools</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/java/web-server/" class="">Web Server</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-9e5aaccdf48687824ccd3b3097af8e41" class="toggle"  />
    <label for="section-9e5aaccdf48687824ccd3b3097af8e41" class="flex justify-between">
      <a href="https://work.rehanvipin.me/linux/" class="">Linux stuff</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Fun Stuff</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/misc/d3/" class="">D3</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/misc/typescript/" class="">Typescript</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/misc/tips-tricks/" class="">Tips &amp; Tricks</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/misc/js-execution/" class="">JavaScript execution</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/misc/web-app-arch/" class="">Web App Architecture</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/misc/web-auth/" class="">Web Authentication</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/tmp/" class="">/tmp</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/whatnext/" class="">/next</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://work.rehanvipin.me/credits/" class="">/credits</a>
  

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Build tools</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#building-java-code">Building Java code</a>
      <ul>
        <li><a href="#compile-and-execute-with-external-libraries">Compile and execute with external libraries</a></li>
        <li><a href="#history-of-build-tools">History of build tools</a></li>
        <li><a href="#third-party-dependencies">Third party dependencies</a></li>
        <li><a href="#maven">Maven</a>
          <ul>
            <li><a href="#setup">Setup</a></li>
          </ul>
        </li>
        <li><a href="#gradle">Gradle</a>
          <ul>
            <li><a href="#setup-1">Setup</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#gradle-in-detail">Gradle (In Detail)</a>
      <ul>
        <li><a href="#build">Build</a></li>
        <li><a href="#tasks">Tasks</a></li>
        <li><a href="#projects">Projects</a></li>
        <li><a href="#plugins">Plugins</a></li>
        <li><a href="#syntax">Syntax</a></li>
        <li><a href="#dependencies">Dependencies</a></li>
        <li><a href="#multi-projects">Multi Projects</a>
          <ul>
            <li><a href="#executing-tasks">Executing tasks</a></li>
            <li><a href="#configurations">Configurations</a></li>
            <li><a href="#dependencies-1">Dependencies</a></li>
          </ul>
        </li>
        <li><a href="#fun-stuff">Fun stuff</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="building-java-code">
  Building Java code
  <a class="anchor" href="#building-java-code">#</a>
</h1>
<p>Why not just use <code>javac</code> ? Well, you can but tools save time because there could be:</p>
<ul>
<li>Many Java files that need to be compiled for the main file.</li>
<li>Incremental builds, building only the classes whose code has changed.</li>
<li>External dependencies that need to be fetched. (Transitive dependencies! Versions!)</li>
<li>Package code into a <code>.jar</code> or <code>.jmod</code> file.</li>
<li>Custom arguments for compiling certain classes ?</li>
<li>Custom arguments for running the tests.</li>
</ul>
<p>This is what tools like <code>maven</code> and <code>gradle</code> try to solve.</p>
<h2 id="compile-and-execute-with-external-libraries">
  Compile and execute with external libraries
  <a class="anchor" href="#compile-and-execute-with-external-libraries">#</a>
</h2>
<p>Suppose you wanted to use the <code>jackson-databind</code> package, how do you do it manually?</p>
<ol>
<li>Use the classes from the library in your code, e.g.:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> com.fasterxml.jackson.databind.ObjectMapper;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">A</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fun</span>() {
</span></span><span style="display:flex;"><span>        ObjectMapper mapper <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ObjectMapper();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol start="2">
<li>Download the jar file for the package from maven-central. You will now have a file like so: <code>jackson-databind-2.15.2.jar</code></li>
<li>Compile your java file, i.e., <code>A.java</code> like so: <code>javac -cp jackson-databind-2.15.2.jar A.java</code></li>
<li>Download the jar files for all transitive dependencies of <code>jackson-databind</code>,
which happen to be <code>jackson-annotations-2.15.2.jar</code> and <code>jackson-core-2.15.2.jar</code>.</li>
<li>Execute your class like so: <code>java -cp jackson-databind-2.15.2.jar:jackson-annotations-2.15.2.jar:jackson-core-2.15.2.jar:. A</code>
(note that the current directory was put on classpath as well, this is so that it can find class <code>A</code>)</li>
</ol>
<p>What&rsquo;s the default classpath? The current directory from where you are executing <code>java</code>.<br>
Will it search recursively in the classpath directories trying to find your files? No.<br>
There is no trying. It will look in the exact location. Nothing else.</p>
<p>There&rsquo;s also <code>-module-path</code> ??</p>
<p>The <code>javac</code> command also requires the <code>-cp</code> argument when there are dependencies.
You can see which class files and source files it loads by passing the <code>-verbose</code> option.
The command doesn&rsquo;t just compile the <code>.java</code> file you have specified, it would compile any other <code>.java</code> files that your file uses and don&rsquo;t yet have corresponding <code>.class</code> files.</p>
<h2 id="history-of-build-tools">
  History of build tools
  <a class="anchor" href="#history-of-build-tools">#</a>
</h2>
<ul>
<li><code>javac</code> and <code>java</code>, the only things you really need</li>
<li><code>make</code> to reduce the commands you need to write</li>
<li><code>ant</code>, as a platform-independent alternative, and was customized to work better with java (e.g., compiling multiple source files at once, rather than one at a time, as each dependency is found. scanning folders for java files, rather than having to add them one by one as new files are added.). <code>ivy</code> was developed to do dependency management for it.</li>
<li><code>maven</code>, which added many conventions over configurations, and plugins to make config files smaller, and makes them uniform. still in XML.</li>
<li><code>gradle</code>, which brought a DSL to do things programatically</li>
</ul>
<h2 id="third-party-dependencies">
  Third party dependencies
  <a class="anchor" href="#third-party-dependencies">#</a>
</h2>
<p>Where are these located? Nowadays, most of them are hoste in maven-central (sort of like npm).</p>
<h2 id="maven">
  Maven
  <a class="anchor" href="#maven">#</a>
</h2>
<p>Helps in managing project dependencies, build / test tasks, and documentation.
You can the project info in a declarative format in pom.xml.</p>
<h3 id="setup">
  Setup
  <a class="anchor" href="#setup">#</a>
</h3>
<p>Download and install <code>mvn</code> in your system.
The <code>MAVEN_HOME</code> variable is required to be set in the parent dir of <code>bin</code> where <code>mvn</code> is present.</p>
<h2 id="gradle">
  Gradle
  <a class="anchor" href="#gradle">#</a>
</h2>
<p>Similar objectives to Maven, but you can specify the project info in a &hellip; scripting language format. With Groovy / Kotlin.<br>
Can help in reducing duplication.</p>
<h3 id="setup-1">
  Setup
  <a class="anchor" href="#setup-1">#</a>
</h3>
<p>Download from <code>gradle.com</code>, and you have the <code>gradle</code> binary. It uses <code>GRADLE_USER_HOME</code> where it places temporary files.
Once you have an inital binary on your system, you can add gradle &ldquo;wrapper&rdquo; files for each project.<br>
That way, you can specify which version of gradle should be used for that project, and it will download the binary specifically for it (if not already there).<br>
This also means that anyone downloading your code and running it, just needs to have the JDK installed, and nothing else.</p>
<h1 id="gradle-in-detail">
  Gradle (In Detail)
  <a class="anchor" href="#gradle-in-detail">#</a>
</h1>
<p>Compile and run your code with doing the least amount of configuration.<br>
There are <code>.gradle</code> files which define <code>tasks</code> which can build / run / test your code. The default one is <code>build.gradle</code>.<br>
Those files are defined in the <code>Groovy</code> language by defualt. You can also have &ldquo;builds&rdquo; in the <code>Kotlin</code> language, in <code>build.gradle.kts</code> files.<br>
Gradle itself runs on the JVM, since it is built using Java. You can choose which JVM it should run on.</p>
<h2 id="build">
  Build
  <a class="anchor" href="#build">#</a>
</h2>
<p>Gradle uses a concept of &ldquo;build&rdquo;. A project having a <code>build.gradle</code> file is called a build. Nearly every gradle command runs wrt a &ldquo;build&rdquo;.<br>
You can create such a buildscript for your project by doing <code>gradle init</code> (which also adds extra stuff e.g., wrapper &amp; settings.gradle files)</p>
<p>There is a build lifecycle which happens when <code>gradle xyzTask</code> is run.
It does &ldquo;initialization&rdquo;, which is reading the settings file,
then does &ldquo;configuration&rdquo;, which is executing the buildscripts for each project involved, creating the task graph etc.,
then does the actual execution of each task involved.</p>
<p>This means any code written outside of a task defintion in the buildscript will be executed in the configuration phase.</p>
<p>Tasks can be chosen to run in parallel with the <code>--parallel</code> flag.</p>
<p>Gradle provides the ability to specify which Java version must the code / generated class files comply with.
This can be set via <code>sourceCompatibility</code>, <code>targetCompatibility</code>, but it is preferred to set a <code>toolchain</code> instead.<br>
The <code>toolchain</code> lets users specify which JRE / JDK (if required) must be found (or downloaded) for compiling / other tasks of the build.<br>
It is specified like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>java <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    toolchain <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        languageVersion <span style="color:#f92672">=</span> JavaLanguageVersion<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span><span style="color:#ae81ff">21</span><span style="color:#f92672">)</span> <span style="color:#75715e">// optional
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        vendor <span style="color:#f92672">=</span> JvmVendorSpec<span style="color:#f92672">.</span><span style="color:#a6e22e">AZUL_ZULU</span> <span style="color:#75715e">// optional
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>It is also possible to specify different java version requirements for each task separately, in which case those multiple versions are part of the toolchain.</p>
<h2 id="tasks">
  Tasks
  <a class="anchor" href="#tasks">#</a>
</h2>
<p>They have lifecycles, and we can add code to run at some stages of these lifecyles, through some lifecycle hooks.<br>
Then you can invoke the task from gradle e.g., <code>gradle myNewTask</code>, and that will go through full life cycle of the task.<br>
Run <code>gradle tasks</code> to see all available tasks for the &ldquo;build&rdquo;.<br>
Some lifecycle hooks which are called during a task&rsquo;s execution lifecyle are <code>doFirst</code>, and <code>doLast</code>.</p>
<p>Tasks are objects of the <code>Task</code> type, and are instances of the <code>DefaultTask</code> class by default.<br>
There are other inbuilt <code>Task</code> sub-classes as well e.g., <code>Copy</code>, <code>Jar</code>, <code>Zip</code> etc. of which task objects can be instantiated.</p>
<p>To know more about a task, run <code>gradle help --tasks taskName</code>.</p>
<p>It is also possible to define a new task class which takes inputs &amp; produces outputs. Those are of types <code>TaskInputs</code>, and <code>TaskOutputs</code>, and are defined with one of the @Input, or @Output annotations e.g.,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span><span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestTask</span> <span style="color:#f92672">:</span> DefaultTask<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Input</span>
</span></span><span style="display:flex;"><span>    val xyz <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@OutputFile</span>
</span></span><span style="display:flex;"><span>    val abc: File <span style="color:#f92672">=</span> File<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/var/tmp/hi.txt&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@TaskAction</span>
</span></span><span style="display:flex;"><span>    fun <span style="color:#a6e22e">someFuncName</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        abc<span style="color:#f92672">.</span><span style="color:#a6e22e">createNewFile</span><span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>To add dependencies between tasks, just set the <code>dependsOn</code> property in the depending task.<br>
The list of all tasks are available in a <code>TaskCollection</code>, which is by default called <code>tasks</code>.
To add to it, we do <code>tasks.register(&quot;newOne&quot;)</code>, and to fetch we do <code>tasks.named(&quot;newOne&quot;)</code></p>
<p>The <code>@TaskAction</code> annotation defines the function which should be run when an task of that class is invoked.<br>
That function is called after <code>doFirst</code>, and before <code>doLast</code>.
It is also possible to create tasks which don&rsquo;t have any action at all e.g., <code>build</code>. They can have other properties and functions, but don&rsquo;t really have an action to do by themselves. They are known as &ldquo;lifecycle tasks&rdquo;</p>
<h2 id="projects">
  Projects
  <a class="anchor" href="#projects">#</a>
</h2>
<p>When you run <code>gradle</code> inside a &ldquo;build&rdquo;, it first looks for the settings.gradle file, creates a &ldquo;Settings&rdquo; object,
determines which projects are in the &ldquo;build&rdquo;, and then looks for the buildscripts (some <code>*.gradle</code> file) for each of those projects to construct &ldquo;Project&rdquo; objects.
There is only one root project for each &ldquo;build&rdquo;.</p>
<h2 id="plugins">
  Plugins
  <a class="anchor" href="#plugins">#</a>
</h2>
<p>These add extra tasks to the &ldquo;build&rdquo; and extra properties too. Once you add a plugin, you can re-run <code>gradle tasks</code> to see what new stuff is there.
Plugins can be added via <code>plugin { id: 'java' }</code> in the buildscript or <code>apply plugin 'java'</code> (deprecated).<br>
Some of the commone ones are:</p>
<ul>
<li><code>java</code> - adds some tasks to build, test, and package code, docs etc. uses some conventions to determine where source files, resources etc. are</li>
<li><code>application</code> - adds tasks to run app, generate dists and run scripts</li>
<li><code>java-library</code> - adds properties, and splits dependencies into <code>api</code> and <code>implementation</code></li>
</ul>
<p>Plugins themselves can extend other plugins. Therefore, if you have <code>java-library</code>, it will implicitly import the <code>java</code> plugin as well.</p>
<p>The <code>java</code> plugin knows where to look for the code via some default paths in <code>sourceSets</code>.
If a project has a different layout, it can set the <code>sourceSets</code> to the custom paths.</p>
<p>Where does gradle get the plugins from?
Some are inbuilt. The third-party ones are available here: <code>https://plugins.gradle.org/</code>.
If you want to get them from a custom repository, you&rsquo;ll need to set the URL in <code>pluginManagement</code> in the <code>settings.gradle</code>.<br>
It&rsquo;s also possible to set plugin versions inside the <code>pluginManagement</code> block and is more preferred as you can use variables (not possible in <code>plugin {}</code>).</p>
<h2 id="syntax">
  Syntax
  <a class="anchor" href="#syntax">#</a>
</h2>
<p>The groovy &amp; kotlin buildscripts have stuff like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>plugins <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    id<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;plugin&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>That&rsquo;s a shorthand for this code which uses a lambda function:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>plugins<span style="color:#f92672">(</span>function<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    id<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;plugin&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">})</span>
</span></span></code></pre></div><p>where <code>id</code> is a method of a &ldquo;this&rdquo; object which is identified by Gradle. so something like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>ext <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    wassup <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hi&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>might do <code>ext.setWassup(&quot;hi&quot;)</code></p>
<p>how are so many objects, and methods available in the script files? gradle 
  <a href="https://docs.gradle.org/current/userguide/writing_build_scripts.html#script-default-imports">auto-imports</a> them.</p>
<h2 id="dependencies">
  Dependencies
  <a class="anchor" href="#dependencies">#</a>
</h2>
<p>How to use other people&rsquo;s code in your project. You can depend on external / internal libraries, projects.<br>
Dependencies are fetched from a &ldquo;repository&rdquo;. Each dependency is assumed to be a java module.
Repository could be a directory on the file system, a web server serving files via the maven / ivy spec (which means either providing maven POM files or ivy XML files, or even a .module file).
The metadata file for each library will tell where to get the jar file / other dependency &ldquo;artifacts&rdquo; from.
It also has other metadata like author info, transitive dependencies info, etc.
Usually the metadata file and artifacts are in the same location.<br>
Once artifacts are fetched, they are kept in a cache (along with metadata files, albeit in a diff place) in the file system for quick use.</p>
<p>Different dependencies can be required at different times, e.g., some for compiling, some for running, some for testing etc.
Gradle helps in specifying different scopes for each one. The <strong>main</strong> scope is the <code>implementation</code> scope, which sets
<code>runtimeOnly</code> and <code>compileOnly</code> scopes. The <code>testImplementation</code> scope inherits from <code>implementation</code> and it also sets
<code>testRuntimeOnly</code>, and <code>testCompileOnly</code>. There are many other scopes too, and plugins can define their own.<br>
However, that&rsquo;s not what is actually used by the <code>build</code>, <code>run</code>, and <code>test</code> tasks.
They use <code>compileClasspath</code>, <code>runtimeClasspath</code>, <code>testCompileClasspath</code>, which are resolvable configurations (meaning it will go and find the jars &amp; transitive dependencies etc) and inherit from <code>implementation</code>, <code>compileOnly</code>, etc. which is where you actually list the deps that you want.</p>
<p>Each dependency can be represented by a string <code>&quot;groupId:artifactId:version&quot;</code> or longer <code>group &quot;&quot; name &quot;&quot; version &quot;&quot;</code>.<br>
If there&rsquo;s multiple GAV modules, they can be specified with a &ldquo;classifier&rdquo; suffix, which comes after the version.</p>
<p>When creating a library, it is possible to get library dependencies using the &ldquo;api&rdquo; scope if these dependencies might be exposed to library consumers,
e.g., via method parameters / return types.  This way, the consumer will get the library in their list of dependencies.</p>
<h2 id="multi-projects">
  Multi Projects
  <a class="anchor" href="#multi-projects">#</a>
</h2>
<p>Gradle provides support for multiple subprojects (AKA modules) within your top-level project. Each of them have their own buildscripts.<br>
There is a top-level settings &amp; can be a top level build script as well, but there is always a top level project (AKA root project).<br>
Although each one can specify their own plugins &amp; dependencies, they are managed and stored in one place.<br>
Once you create a separate folder for each project &amp; give each one a build script, you can add these projects to the settings like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>rootProject<span style="color:#f92672">.</span><span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;fun1&#34;</span>
</span></span><span style="display:flex;"><span>include<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;fun2&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;fun3&#34;</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><p>and upon running <code>gradle projects</code>, you can see the project tree like so:</p>
<pre tabindex="0"><code>Root project &#39;fun1&#39;
+--- Project &#39;:fun2&#39;
\--- Project &#39;:fun3&#39;
</code></pre><h3 id="executing-tasks">
  Executing tasks
  <a class="anchor" href="#executing-tasks">#</a>
</h3>
<p>You can step into any of the subdirectories and run tasks e.g., <code>gradle funTimes</code>
and it will run the <code>funTimes</code> task on the sub-project and all its sub-projects which have this task defined.
You can also run it for a particular project by giving the fully qualified project name e.g., <code>:fun2:funTimes</code>. The root one doesn&rsquo;t need any qualifiers.<br>
But if you want to run only for the root, you do so by running <code>gradle :funTimes</code>.</p>
<h3 id="configurations">
  Configurations
  <a class="anchor" href="#configurations">#</a>
</h3>
<p>You can specify specify some settings e.g., properties, dependencies for <code>subprojects</code>, or <code>allprojects</code> if you want to define some common configurations
to be shared across multiple projects. Even project specific stuff can be added via <code>project(&quot;:fun2&quot;) {}</code>.</p>
<p>It&rsquo;s also possible to apply plugins for the root &amp; subprojects in one place. It is also possible to fetch it in the root project &amp; apply in the subprojects only.
e.g.,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>plugins <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    id<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;funplugin&#34;</span><span style="color:#f92672">)</span> version <span style="color:#e6db74">&#34;x&#34;</span> apply <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>and use in subproject like so:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-groovy" data-lang="groovy"><span style="display:flex;"><span>plugins <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    id<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;funplugin&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="dependencies-1">
  Dependencies
  <a class="anchor" href="#dependencies-1">#</a>
</h3>
<p>It is possible to use one subproject in another. It can just be added to the <code>dependencies</code> block of the consumer project with the required scope. E.g.,
<code>implementation project(&quot;:fun3&quot;)</code></p>
<h2 id="fun-stuff">
  Fun stuff
  <a class="anchor" href="#fun-stuff">#</a>
</h2>
<ul>
<li>Gradle 
  <a href="https://docs.gradle.org/current/userguide/continuous_builds.html">supports</a> &ldquo;continuous invocation of tasks&rdquo; based on files changing. This can be done by adding the <code>--continuous</code> flag.</li>
<li>You needn&rsquo;t write the full name of a task. If you have tasks &lsquo;projects&rsquo;, and &lsquo;properties&rsquo;, you can just do <code>gradle proj</code> to run the first one.</li>
</ul>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#building-java-code">Building Java code</a>
      <ul>
        <li><a href="#compile-and-execute-with-external-libraries">Compile and execute with external libraries</a></li>
        <li><a href="#history-of-build-tools">History of build tools</a></li>
        <li><a href="#third-party-dependencies">Third party dependencies</a></li>
        <li><a href="#maven">Maven</a>
          <ul>
            <li><a href="#setup">Setup</a></li>
          </ul>
        </li>
        <li><a href="#gradle">Gradle</a>
          <ul>
            <li><a href="#setup-1">Setup</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#gradle-in-detail">Gradle (In Detail)</a>
      <ul>
        <li><a href="#build">Build</a></li>
        <li><a href="#tasks">Tasks</a></li>
        <li><a href="#projects">Projects</a></li>
        <li><a href="#plugins">Plugins</a></li>
        <li><a href="#syntax">Syntax</a></li>
        <li><a href="#dependencies">Dependencies</a></li>
        <li><a href="#multi-projects">Multi Projects</a>
          <ul>
            <li><a href="#executing-tasks">Executing tasks</a></li>
            <li><a href="#configurations">Configurations</a></li>
            <li><a href="#dependencies-1">Dependencies</a></li>
          </ul>
        </li>
        <li><a href="#fun-stuff">Fun stuff</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>

</html>












